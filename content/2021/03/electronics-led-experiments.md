---
title: "電子工作日記: LEDを光らせる"
date: 2021-03-24
tags:
- electronics
- tech
- log
---

買った部品が届いた。
電源用マイクロUSBコネクタDIP化キットを取り出し、はんだ付けをする。
これをブレッドボードに刺していろいろ試そうと思う。
これ以降はんだ付けをすることは当分ないだろう。

とりあえずLEDを光らせるために、あらためて計算してみようと思う。

### LEDの電流計算ふたたび

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="302px" height="165px" viewBox="-0.5 -0.5 302 165" style="background-color: rgb(255, 255, 255);"><defs></defs><g><path d="M 200 80 L 245 80 M 255 50 L 255 110 M 255 80 L 300 80" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(250,0)scale(-1,1)translate(-250,0)" pointer-events="all"></path><rect x="241" y="65" width="4" height="30" fill="#000000" stroke="#000000" transform="translate(250,0)scale(-1,1)translate(-250,0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 117px; margin-left: 250px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Verdana; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">V=5V</div></div></div></foreignObject><text x="250" y="129" fill="#000000" font-family="Verdana" font-size="12px" text-anchor="middle">V=5V</text></switch></g><rect x="100" y="70" width="100" height="20" fill="none" stroke="none" pointer-events="all"></rect><path d="M 100 80 L 118 80 L 122 70 L 130 90 L 138 70 L 146 90 L 154 70 L 162 90 L 170 70 L 178 90 L 182 80 L 200 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 67px; margin-left: 150px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">R</div></div></div></foreignObject><text x="150" y="67" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">R</text></switch></g><rect x="0" y="50" width="100" height="65" fill="none" stroke="none" transform="rotate(-180,50,82.5)" pointer-events="all"></rect><path d="M 30 55 L 70 85 L 30 115 Z M 0 85 L 30 85 M 70 55 L 70 115 M 80 57 L 87 50 M 87 53 L 87 50 L 84 50 M 70 85 L 100 85" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" transform="rotate(-180,50,82.5)" pointer-events="all"></path><path d="M 0 79.9 L 0 0 L 300 0 L 300 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 0 120 L 0 140 M 100 120 L 100 140 M 0 130 L 100 130" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 147px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">V<sub>F</sub>=3.4V (20mA)</div></div></div></foreignObject><text x="50" y="159" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">VF=3.4V (20mA)</text></switch></g><path d="M 100 120 L 100 140 M 200 120 L 200 140 M 100 130 L 200 130" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 147px; margin-left: 101px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">V<sub>R</sub></div></div></div></foreignObject><text x="150" y="159" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">VR</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"></g><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

前回電流の計算で困っていたが、更に調べたら良い計算法があることがわかった。
LEDは一定以上の電圧になると急激に電流が流れるようになる。
その性質を近似すると、光っている時のLEDは電圧降下$V_F$だけが発生する逆向きの電源として見ることができる。

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="302px" height="165px" viewBox="-0.5 -0.5 302 165" style="background-color: rgb(255, 255, 255);"><defs></defs><g><path d="M 200 80 L 245 80 M 255 50 L 255 110 M 255 80 L 300 80" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(250,0)scale(-1,1)translate(-250,0)" pointer-events="all"></path><rect x="241" y="65" width="4" height="30" fill="#000000" stroke="#000000" transform="translate(250,0)scale(-1,1)translate(-250,0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 117px; margin-left: 250px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Verdana; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">V=5V</div></div></div></foreignObject><text x="250" y="129" fill="#000000" font-family="Verdana" font-size="12px" text-anchor="middle">V=5V</text></switch></g><rect x="100" y="70" width="100" height="20" fill="none" stroke="none" pointer-events="all"></rect><path d="M 100 80 L 118 80 L 122 70 L 130 90 L 138 70 L 146 90 L 154 70 L 162 90 L 170 70 L 178 90 L 182 80 L 200 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 67px; margin-left: 150px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">R</div></div></div></foreignObject><text x="150" y="67" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">R</text></switch></g><path d="M 0 79.9 L 0 0 L 300 0 L 300 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 0 120 L 0 140 M 100 120 L 100 140 M 0 130 L 100 130" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 147px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">V<sub>F</sub>=3.4V</div></div></div></foreignObject><text x="50" y="159" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">VF=3.4V</text></switch></g><path d="M 100 120 L 100 140 M 200 120 L 200 140 M 100 130 L 200 130" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 147px; margin-left: 101px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">V<sub>R</sub></div></div></div></foreignObject><text x="150" y="159" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">VR</text></switch></g><path d="M 0 80 L 45 80 M 55 50 L 55 110 M 55 80 L 100 80" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(50,0)scale(-1,1)translate(-50,0)rotate(180,50,80)" pointer-events="all"></path><rect x="41" y="65" width="4" height="30" fill="#000000" stroke="#000000" transform="translate(50,0)scale(-1,1)translate(-50,0)rotate(180,50,80)" pointer-events="all"></rect></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"></g><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

結局、全体としては電圧$V-V_F$の電源と抵抗$R$だけの回路として計算できる。
この回路の抵抗に流れる電流を計算すれば良いわけだ。

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="255px" height="155px" viewBox="-0.5 -0.5 255 155" style="background-color: rgb(255, 255, 255);"><defs></defs><g><path d="M 120 80 L 165 80 M 175 50 L 175 110 M 175 80 L 220 80" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(170,0)scale(-1,1)translate(-170,0)" pointer-events="all"></path><rect x="161" y="65" width="4" height="30" fill="#000000" stroke="#000000" transform="translate(170,0)scale(-1,1)translate(-170,0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 117px; margin-left: 195px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Verdana; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">V - V<sub>F&nbsp;</sub>= 5 - 3.4 = 1.6V</div></div></div></foreignObject><text x="195" y="129" fill="#000000" font-family="Verdana" font-size="12px" text-anchor="middle">V - VF&nbsp;=...</text></switch></g><rect x="20" y="70" width="100" height="20" fill="none" stroke="none" pointer-events="all"></rect><path d="M 20 80 L 38 80 L 42 70 L 50 90 L 58 70 L 66 90 L 74 70 L 82 90 L 90 70 L 98 90 L 102 80 L 120 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 67px; margin-left: 70px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">R</div></div></div></foreignObject><text x="70" y="67" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">R</text></switch></g><path d="M 20 80 L 0 80 L 0 0 L 220 0 L 220 80" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 20 110 L 20 130 M 120 110 L 120 130 M 20 120 L 120 120" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"></path><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 137px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">V<sub>R</sub></div></div></div></foreignObject><text x="70" y="149" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">VR</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"></g><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

例えば100Ωの抵抗を使った時に流れる電流は$I= \frac{V-V_F}{R} = \frac{5-3.4}{100} = 16$mAとなる。
47Ωのときは$I= \frac{V-V_F}{R} = \frac{5-3.4}{47} = 34$mAとなり、これは前回調べた最大電流を超えている。

というわけで実際にブレッドボードに100Ω抵抗とLEDを刺し、UEB充電器のスイッチを入れると無事光った。
ビカビカである。
電圧、電流をテスターで測定したところ、おおむね計算通りの値が得られた。
限度30mAのところ16mAしか電流が流れていないはずだがめちゃくちゃ明るい。
部品セットについていた白色LEDに差し替えてみても同じように光る。
こちらはデータシートがないが、色が同じならだいたい性質は同じということだろうか。

次は何をすればいいだろう、10年ぶりくらいにLチカに再挑戦してみようか？
調光機能を作ってみると良いと勧められたのでそれも試してみたい。
オペアンプやトランジスタは買ってあるので、これを元にがんばってみよう。
